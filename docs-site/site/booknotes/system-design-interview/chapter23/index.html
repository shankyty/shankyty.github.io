
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.com/booknotes/system-design-interview/chapter23/">
      
      
        <link rel="prev" href="../chapter22/">
      
      
        <link rel="next" href="../chapter24/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Hotel Reservation System - Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hotel-reservation-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Notes" class="md-header__button md-logo" aria-label="Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hotel Reservation System
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Notes" class="md-nav__button md-logo" aria-label="Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to My Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Booknotes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Booknotes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    System design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            System design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Understanding distributed systems
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            Understanding distributed systems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/part00/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/part01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/part02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coordination
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/part03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scalability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/part04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resiliency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-design/understanding-distributed-systems/part05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maintainability
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    System design interview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            System design interview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Design Interview - An Insider's Guide (vol 1 &amp; 2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scale From Zero to Millions of Users
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Back-of-the-envelope Estimation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A Framework for System Design Interviews
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a Rate Limiter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design Consistent Hashing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a Key-Value Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a Unique ID Generator in Distributed Systems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a URL Shortener
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a Web Crawler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a Notification System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a News Feed System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design a Chat System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design A Search Autocomplete System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design YouTube
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design Google Drive
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proximity Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nearby Friends
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google Maps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Message Queue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics Monitoring and Alerting System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ad Click Event Aggregation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Hotel Reservation System
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Email Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3-like Object Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Real-time Gaming Leaderboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Payment System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Digital Wallet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stock Exchange
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="hotel-reservation-system">Hotel Reservation System</h1>
<p>In this chapter, we're designing a hotel reservation system, similar to Marriott International.</p>
<p>Applicable to other types of systems as well - Airbnb, flight reservation, movie ticket booking.</p>
<h1 id="step-1-understand-the-problem-and-establish-design-scope">Step 1 - Understand the Problem and Establish Design Scope</h1>
<p>Before diving into designing the system, we should ask the interviewer questions to clarify the scope:
 * C: What is the scale of the system?
 * I: We're building a website for a hotel chain \w 5000 hotels and 1mil rooms
 * C: Do customers pay when they make a reservation or when they arrive at the hotel?
 * I: They pay in full when making reservations.
 * C: Do customers book hotel rooms through the website only? Do we have to support other reservation options such as phone calls?
 * I: They make bookings through the website or app only.
 * C: Can customers cancel reservations?
 * I: Yes
 * C: Other things to consider?
 * I: Yes, we allow overbooking by 10%. Hotel will sell more rooms than there actually are. Hotels do this in anticipation that clients will cancel bookings.
 * C: Since not much time, we'll focus on - show hotel-related page, hotel-room details page, reserve a room, admin panel, support overbooking.
 * I: Sounds good.
 * I: One more thing - hotel prices change all the time. Assume a hotel room's price changes every day.
 * C: OK.</p>
<h2 id="non-functional-requirements">Non-functional requirements</h2>
<ul>
<li>Support high concurrency - there might be a lot of customers trying to book the same hotel during peak season.</li>
<li>Moderate latency - it's ideal to have low latency when a user makes a reservation, but it's acceptable if the system takes a few seconds to process it.</li>
</ul>
<h2 id="back-of-the-envelope-estimation">Back-of-the-envelope estimation</h2>
<ul>
<li>5000 hotels and 1mil rooms in total</li>
<li>Assume 70% of rooms are occupied and average stay duration is 3 days</li>
<li>Estimated daily reservations - 1mil * 0.7 / 3 = ~240k reservations per day</li>
<li>Reservations per second - 240k / 10^5 seconds in a day = ~3. Average reservation TPS is low.</li>
</ul>
<p>Let's estimate the QPS. If we assume that there are three steps to reach the reservation page and there is a 10% conversion rate per page,
we can estimate that if there are 3 reservations, then there must be 30 views of reservation page and 300 views of hotel room detail page.
<img alt="qps-estimation" src="images/qps-estimation.png" /></p>
<h1 id="step-2-propose-high-level-design-and-get-buy-in">Step 2 - Propose High-Level Design and Get Buy-In</h1>
<p>We'll explore - API Design, Data model, high-level design.</p>
<h2 id="api-design">API Design</h2>
<p>This API Design focuses on the core endpoints (using RESTful practices), we'll need in order to support a hotel reservation system.</p>
<p>A fully-fledged system would require a more extensive API with support for searching for rooms based on lots of criteria, but we won't be focusing on that in this section.
Reason is that they aren't technically challenging, so they're out of scope.</p>
<p><strong>Hotel-related API</strong>
 * <code>GET /v1/hotels/{id}</code> - get detailed info about a hotel
 * <code>POST /v1/hotels</code> - add a new hotel. Only available to ops
 * <code>PUT /v1/hotels/{id}</code> - update hotel info. Only available to ops
 * <code>DELETE /v1/hotels/{id}</code> - delete a hotel. API is only available to ops</p>
<p><strong>Room-related API</strong>
 * <code>GET /v1/hotels/{id}/rooms/{id}</code> - get detailed information about a room
 * <code>POST /v1/hotels/{id}/rooms</code> - Add a room. Only available to ops
 * <code>PUT /v1/hotels/{id}/rooms/{id}</code> - Update room info. Only available to ops
 * <code>DELETE /v1/hotels/{id}/rooms/{id}</code> - Delete a room. Only available to ops</p>
<p><strong>Reservation-related API</strong>
 * <code>GET /v1/reservations</code> - get reservation history of current user
 * <code>GET /v1/reservations/{id}</code> - get detailed info about a reservation
 * <code>POST /v1/reservations</code> - make a new reservation
 * <code>DELETE /v1/reservations/{id}</code> - cancel a reservation</p>
<p>Here's an example request to make a reservation:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>{
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  &quot;startDate&quot;:&quot;2021-04-28&quot;,
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  &quot;endDate&quot;:&quot;2021-04-30&quot;,
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  &quot;hotelID&quot;:&quot;245&quot;,
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  &quot;roomID&quot;:&quot;U12354673389&quot;,
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  &quot;reservationID&quot;:&quot;13422445&quot;
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>}
</code></pre></div></p>
<p>Note that the <code>reservationID</code> is an idempotency key to avoid double booking. Details explained in <a href="#concurrency">concurrency section</a></p>
<h2 id="data-model">Data model</h2>
<p>Before we choose what database to use, let's consider our access patterns.</p>
<p>We need to support the following queries:
 * View detailed info about a hotel
 * Find available types of rooms given a date range
 * Record a reservation
 * Look up a reservation or past history of reservations</p>
<p>From our estimations, we know the scale of the system is not large, but we need to prepare for traffic surges.</p>
<p>Given this knowledge, we'll choose a relational database because:
 * Relational DBs work well with read-heavy and less write-heavy systems.
 * NoSQL databases are normally optimized for writes, but we know we won't have many as only a fraction of users who visit the site make a reservation.
 * Relational DBs provide ACID guarantees. These are important for such a system as without them, we won't be able to prevent problems such as negative balance, double charge, etc.
 * Relational DBs can easily model the data as the structure is very clear.</p>
<p>Here is our schema design:
<img alt="schema-design" src="images/schema-design.png" /></p>
<p>Most fields are self-explanatory. Only field worth mentioning is the <code>status</code> field which represents the state machine of a given room:
<img alt="status-state-machine" src="images/status-state-machine.png" /></p>
<p>This data model works well for a system like Airbnb, but not for hotels where users don't reserve a particular room but a room type.
They reserve a type of room and a room number is chosen at the point of reservation.</p>
<p>This shortcoming will be addressed in the <a href="#improved-data-model">Improved Data Model</a> section.</p>
<h2 id="high-level-design">High-level Design</h2>
<p>We've chosen a microservice architecture for this design. It has gained great popularity in recent years:
<img alt="high-level-design" src="images/high-level-design.png" />
 * Users book a hotel room on their phone or computer
 * Admin perform administrative functions such as refunding/cancelling a payment, etc
 * CDN caches static resources such as JS bundles, images, videos, etc
 * Public API Gateway - fully-managed service which supports rate limiting, authentication, etc.
 * Internal APIs - only visible to authorized personnel. Usually protected by a VPN.
 * Hotel service - provides detailed information about hotels and rooms. Hotel and room data is static, so it can be cached aggressively.
 * Rate service - provides room rates for different future dates. An interesting note about this domain is that prices depend on how full a hotel is at a given day.
 * Reservation service - receives reservation requests and reserves hotel rooms. Also tracks room inventory as reservations are made/cancelled.
 * Payment service - processes payments and updates reservation statuses on success.
 * Hotel management service - available to authorized personnel only. Allows certain administrative functions for managing and viewing reservations, hotels, etc.</p>
<p>Inter-service communication can be facilitated via a RPC framework, such as gRPC.</p>
<h1 id="step-3-design-deep-dive">Step 3 - Design Deep Dive</h1>
<p>Let's dive deeper into:
 * Improved data model
 * Concurrency issues
 * Scalability
 * Resolving data inconsistency in microservices</p>
<h2 id="improved-data-model">Improved data model</h2>
<p>As mentioned in a previous section, we need to amend our API and schema to enable reserving a type of room vs. a particular one.</p>
<p>For the reservation API, we no longer reserve a <code>roomID</code>, but we reserve a <code>roomTypeID</code>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>POST /v1/reservations
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>{
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  &quot;startDate&quot;:&quot;2021-04-28&quot;,
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>  &quot;endDate&quot;:&quot;2021-04-30&quot;,
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  &quot;hotelID&quot;:&quot;245&quot;,
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  &quot;roomTypeID&quot;:&quot;12354673389&quot;,
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>  &quot;roomCount&quot;:&quot;3&quot;,
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>  &quot;reservationID&quot;:&quot;13422445&quot;
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>}
</code></pre></div></p>
<p>Here's the updated schema:
<img alt="updated-schema" src="images/updated-schema.png" />
 * room - contains information about a room
 * room_type_rate - contains information about prices for a given room type
 * reservation - records guest reservation data
 * room_type_inventory - stores inventory data about hotel rooms. </p>
<p>Let's take a look at the <code>room_type_inventory</code> columns as that table is more interesting:
 * hotel_id - id of hotel
 * room_type_id - id of a room type
 * date - a single date
 * total_inventory - total number of rooms minus those that are temporarily taken off the inventory.
 * total_reserved - total number of rooms booked for given (hotel_id, room_type_id, date)</p>
<p>There are alternative ways to design this table, but having one room per (hotel_id, room_type_id, date) enables easy 
reservation management and easier queries.</p>
<p>The rows in the table are pre-populated using a daily CRON job.</p>
<p>Sample data:
| hotel_id | room_type_id | date       | total_inventory | total_reserved |
|----------|--------------|------------|-----------------|----------------|
| 211      | 1001         | 2021-06-01 | 100             | 80             |
| 211      | 1001         | 2021-06-02 | 100             | 82             |
| 211      | 1001         | 2021-06-03 | 100             | 86             |
| 211      | 1001         | ...        | ...             |                |
| 211      | 1001         | 2023-05-31 | 100             | 0              |
| 211      | 1002         | 2021-06-01 | 200             | 16             |
| 2210     | 101          | 2021-06-01 | 30              | 23             |
| 2210     | 101          | 2021-06-02 | 30              | 25             |</p>
<p>Sample SQL query to check the availability of a type of room:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>SELECT date, total_inventory, total_reserved
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>FROM room_type_inventory
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>WHERE room_type_id = ${roomTypeId} AND hotel_id = ${hotelId}
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>AND date between ${startDate} and ${endDate}
</code></pre></div></p>
<p>How to check availability for a specified number of rooms using that data (note that we support overbooking):
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>if (total_reserved + ${numberOfRoomsToReserve}) &lt;= 110% * total_inventory
</code></pre></div></p>
<p>Now let's do some estimation about the storage volume.
 * We have 5000 hotels.
 * Each hotel has 20 types of rooms.
 * 5000 * 20 * 2 (years) * 365 (days) = 73mil rows</p>
<p>73 million rows is not a lot of data and a single database server can handle it.
It makes sense, however, to setup read replication (potentially across different zones) to enable high availability.</p>
<p>Follow-up question - if reservation data is too large for a single database, what would you do?
 * Store only current and future reservation data. Reservation history can be moved to cold storage.
 * Database sharding - we can shard our data by <code>hash(hotel_id) % servers_cnt</code> as we always select the <code>hotel_id</code> in our queries.</p>
<h2 id="concurrency-issues">Concurrency issues</h2>
<p>Another important problem to address is double booking.</p>
<p>There are two issues to address:
 * Same user clicks on "book" twice
 * Multiple users try to book a room at the same time</p>
<p>Here's a visualization of the first problem:
<img alt="double-booking-single-user" src="images/double-booking-single-user.png" /></p>
<p>There are two approaches to solving this problem:
 * Client-side handling - front-end can disable the book button once clicked. If a user disabled javascript, however, they won't see the button becoming grayed out.
 * Idemptent API - Add an idempotency key to the API, which enables a user to execute an action once, regardless of how many times the endpoint is invoked:
<img alt="idempotency" src="images/idempotency.png" /></p>
<p>Here's how this flow works:
 * A reservation order is generated once you're in the process of filling in your details and making a booking. The reservation order is generated using a globally unique identifier.
 * Submit reservation 1 using the <code>reservation_id</code> generated in the previous step.
 * If "complete booking" is clicked a second time, the same <code>reservation_id</code> is sent and the backend detects that this is a duplicate reservation.
 * The duplication is avoided by making the <code>reservation_id</code> column have a unique constraint, preventing multiple records with that id being stored in the DB.
<img alt="unique-constraint-violation" src="images/unique-constraint-violation.png" /></p>
<p>What if there are multiple users making the same reservation?
<img alt="double-booking-multiple-users" src="images/double-booking-multiple-users.png" />
 * Let's assume the transaction isolation level is not serializable
 * User 1 and 2 attempt to book the same room at the same time.
 * Transaction 1 checks if there are enough rooms - there are
 * Transaction 2 check if there are enough rooms - there are
 * Transaction 2 reserves the room and updates the inventory
 * Transaction 1 also reserves the room as it still sees there are 99 <code>total_reserved</code> rooms out of 100.
 * Both transactions successfully commit the changes</p>
<p>This problem can be solved using some form of locking mechanism:
 * Pessimistic locking
 * Optimistic locking
 * Database constraints</p>
<p>Here's the SQL we use to reserve a room:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">#</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="n">room</span><span class="w"> </span><span class="n">inventory</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">SELECT</span><span class="w"> </span><span class="nb">date</span><span class="p">,</span><span class="w"> </span><span class="n">total_inventory</span><span class="p">,</span><span class="w"> </span><span class="n">total_reserved</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">FROM</span><span class="w"> </span><span class="n">room_type_inventory</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">room_type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">${</span><span class="n">roomTypeId</span><span class="err">}</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">hotel_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">${</span><span class="n">hotelId</span><span class="err">}</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">AND</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="err">${</span><span class="n">startDate</span><span class="err">}</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="err">${</span><span class="n">endDate</span><span class="err">}</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="o">#</span><span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="k">every</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="mi">1</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="k">if</span><span class="p">((</span><span class="n">total_reserved</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">${</span><span class="n">numberOfRoomsToReserve</span><span class="err">}</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">110</span><span class="o">%</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">total_inventory</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">  </span><span class="k">Rollback</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="err">}</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="o">#</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="n">rooms</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="k">UPDATE</span><span class="w"> </span><span class="n">room_type_inventory</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="k">SET</span><span class="w"> </span><span class="n">total_reserved</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">total_reserved</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">${</span><span class="n">numberOfRoomsToReserve</span><span class="err">}</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">room_type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">${</span><span class="n">roomTypeId</span><span class="err">}</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="k">AND</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="err">${</span><span class="n">startDate</span><span class="err">}</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="err">${</span><span class="n">endDate</span><span class="err">}</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="k">Commit</span>
</code></pre></div></p>
<h3 id="option-1-pessimistic-locking">Option 1: Pessimistic locking</h3>
<p>Pessimistic locking prevents simultaneous updates by putting a lock on a record while it's being updated.</p>
<p>This can be done in MySQL by using the <code>SELECT... FOR UPDATE</code> query, which locks the rows selected by the query until the transaction is committed.
<img alt="pessimistic-locking" src="images/pessimistic-locking.png" /></p>
<p>Pros:
 * Prevents applications from updating data that is being changed
 * Easy to implement and avoids conflict by serializing updates. Useful when there is heavy data contention.</p>
<p>Cons:
 * Deadlocks may occur when multiple resources are locked.
 * This approach is not scalable - if transaction is locked for too long, this has impact on all other transactions trying to access the resource.
 * The impact is severe when the query selects a lot of resources and the transaction is long-lived.</p>
<p>The author doesn't recommend this approach due to its scalability issues.</p>
<h3 id="option-2-optimistic-locking">Option 2: Optimistic locking</h3>
<p>Optimistic locking allows multiple users to attempt to update a record at the same time.</p>
<p>There are two common ways to implement it - version numbers and timestamps. Version numbers are recommended as server clocks can be inaccurate.
<img alt="optimistic-locking" src="images/optimistic-locking.png" />
 * A new <code>version</code> column is added to the database table
 * Before a user modifies a database row, the version number is read
 * When the user updates the row, the version number is increased by 1 and written back to the database
 * Database validation prevents the insert if the new version number doesn't exceed the previous one</p>
<p>Optimistic locking is usually faster than pessimistic locking as we're not locking the database. 
Its performance tends to degrade when concurrency is high, however, as that leads to a lot of rollbacks.</p>
<p>Pros:
 * It prevents applications from editing stale data
 * We don't need to acquire a lock in the database
 * Preferred option when data contention is low, ie rarely are there update conflicts</p>
<p>Cons:
 * Performance is poor when data contention is high</p>
<p>Optimistic locking is a good option for our system as reservation QPS is not extremely high.</p>
<h3 id="option-3-database-constraints">Option 3: Database constraints</h3>
<p>This approach is very similar to optimistic locking, but the guardrails are implemented using a database constraint:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>CONSTRAINT `check_room_count` CHECK((`total_inventory - total_reserved` &gt;= 0))
</code></pre></div>
<img alt="database-constraint" src="images/database-constraint.png" /></p>
<p>Pros:
 * Easy to implement
 * Works well when data contention is small</p>
<p>Cons:
 * Similar to optimistic locking, performs poorly when data contention is high
 * Database constraints cannot be easily version-controlled like application code
 * Not all databases support constraints</p>
<p>This is another good option for a hotel reservation system due to its ease of implementation.</p>
<h2 id="scalability">Scalability</h2>
<p>Usually, the load of a hotel reservation system is not high. </p>
<p>However, the interviewer might ask you how you'd handle a situation where the system gets adopted for a larger, popular travel site such as booking.com
In that case, QPS can be 1000 times larger.</p>
<p>When there is such a situation, it is important to understand where our bottlenecks are. All the services are stateless, so they can be easily scaled via replication.</p>
<p>The database, however, is stateful and it's not as obvious how it can get scaled.</p>
<p>One way to scale it is by implementing database sharding - we can split the data across multiple databases, where each of them contain a portion of the data.</p>
<p>We can shard based on <code>hotel_id</code> as all queries filter based on it. 
Assuming, QPS is 30,000, after sharding the database in 16 shards, each shard handles 1875 QPS, which is within a single MySQL cluster's load capacity.
<img alt="database-sharding" src="images/database-sharding.png" /></p>
<p>We can also utilize caching for room inventory and reservations via Redis. We can set TTL so that old data can expire for days which are past.
<img alt="inventory-cache" src="images/inventory-cache.png" /></p>
<p>The way we store an inventory is based on the <code>hotel_id</code>, <code>room_type_id</code> and <code>date</code>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>key: hotelID_roomTypeID_{date}
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>value: the number of available rooms for the given hotel ID, room type ID and date.
</code></pre></div></p>
<p>Data consistency happens async and is managed by using a CDC streaming mechanism - database changes are read and applied to a separate system.
Debezium is a popular option for synchronizing database changes with Redis.</p>
<p>Using such a mechanism, there is a possibility that the cache and database are inconsistent for some time.
This is fine in our case because the database will prevent us from making an invalid reservation.</p>
<p>This will cause some issue on the UI as a user would have to refresh the page to see that "there are no more rooms left", 
but that is something which can happen regardless of this issue if eg a person hesitates a lot before making a reservation.</p>
<p>Caching pros:
 * Reduced database load
 * High performance, as Redis manages data in-memory</p>
<p>Caching cons:
 * Maintaining data consistency between cache and DB is hard. We need to consider how the inconsistency impacts user experience.</p>
<h2 id="data-consistency-among-services">Data consistency among services</h2>
<p>A monolithic application enables us to use a shared relational database for ensuring data consistency.</p>
<p>In our microservice design, we chose a hybrid approach where some services are separate, 
but the reservation and inventory APIs are handled by the same servicefor the reservation and inventory APIs.</p>
<p>This is done because we want to leverage the relational database's ACID guarantees to ensure consistency.</p>
<p>However, the interviewer might challenge this approach as it's not a pure microservice architecture, where each service has a dedicated database:
<img alt="microservices-vs-monolith" src="images/microservices-vs-monolith.png" /></p>
<p>This can lead to consistency issues. In a monolithic server, we can leverage a relational DBs transaction capabilities to implement atomic operations:
<img alt="atomicity-monolith" src="images/atomicity-monolith.png" /></p>
<p>It's more challenging, however, to guarantee this atomicity when the operation spans across multiple services:
<img alt="microservice-non-atomic-operation" src="images/microservice-non-atomic-operation.png" /></p>
<p>There are some well-known techniques to handle these data inconsistencies:
 * Two-phase commit - a database protocol which guarantees atomic transaction commit across multiple nodes. 
   It's not performant, though, since a single node lag leads to all nodes blocking the operation.
 * Saga - a sequence of local transactions, where compensating transactions are triggered if any of the steps in a workflow fail. This is an eventually consistent approach.</p>
<p>It's worth noting that addressing data inconsistencies across microservices is a challenging problem, which raise the system complexity.
It is good to consider whether the cost is worth it, given our more pragmatic approach of encapsulating dependent operations within the same relational database.</p>
<h1 id="step-4-wrap-up">Step 4 - Wrap Up</h1>
<p>We presented a design for a hotel reservation system.</p>
<p>These are the steps we went through:
 * Gathering requirements and doing back-of-the-envelope calculations to understand the system's scale
 * We presented the API Design, Data Model and system architecture in the high-level design
 * In the deep dive, we explored alternative database schema designs as requirements changed
 * We discussed race conditions and proposed solutions - pessimistic/optimistic locking, database constraints
 * Ways to scale the system via database sharding and caching
 * Finally we addressed how to handle data consistency issues across multiple microservices</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>